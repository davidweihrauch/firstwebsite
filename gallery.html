
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gallery</title>
<style>
  :root {
    --gap: 10px;
    --tile-min: 160px;
    --radius: 10px;
    --bg: #0b0d0f; --card: #14171a; --text: #e8eaed;
  }
  * { box-sizing: border-box; }
  body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
         background: var(--bg); color: var(--text); }
  header { padding: 20px; text-align: center; }
  


  
  /* Responsive, neat rows */
  .gallery {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 10px;
    max-width: 1200px;
    margin: 0 auto 60px;
  }

  /* Thumbnail card chrome */
  .gallery figure {
    margin: 0;
    border-radius: 10px;
    background: #14171a;
    overflow: hidden;
    box-shadow: 0 6px 20px rgba(0,0,0,.25);
    /* Prevent layout shift while image loads */
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* üëá Key: fix a uniform height, auto width keeps original aspect ratio */
  .gallery figure > img {
    height: 200px;      /* row height ‚Äî adjust to taste */
    width: auto;        /* preserve aspect ratio */
    display: block;
    object-fit: contain; /* optional: avoids overflow for odd EXIF cases */
    transition: transform .25s ease, opacity .25s ease;
  }
  .gallery figure:hover > img {
    transform: scale(1.02);
    opacity: .98;
  }




  @media (min-width:768px){ 
    figure img { height: 220px; } 
    .gallery figure > img { height: 220px; }
  }
  @media (min-width:1024px){ figure img { height: 240px; } 
    .gallery figure > img { height: 240px; }
  }
  .lightbox { position: fixed; inset: 0; display:none; align-items:center; justify-content:center;
              background: rgba(0,0,0,.85); padding:2vw; z-index: 9999; }
  .lightbox.open { display:flex; }
  .lightbox img { max-width: min(95vw, 1400px); max-height: 95vh; border-radius: var(--radius);
                  box-shadow: 0 20px 60px rgba(0,0,0,.5); }
  .lightbox button.close { position:absolute; top:10px; right:10px; border:0; background: rgba(255,255,255,.15);
                           color:#fff; padding:8px 12px; border-radius:8px; cursor:pointer; }
  a {
      color: #248a3d;
      text-decoration: none;
  }

  a:hover {
      text-decoration: underline;
  }
</style>
</head>
<body>
  <header>
    <h1>Gallerie</h1>
    <a href="../index.html">‚Üê Back to home</a>
    <p style="opacity:.7">Zum Vergr√∂√üern auf die Fotos klicken.</p>
  </header>

  <main>
    <section class="gallery" id="gallery" aria-label="Image gallery"></section>
  </main>

  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Image viewer">
    <button class="close" type="button" aria-label="Close">Close ‚úï</button>
    <img id="lightboxImg" alt="">
  </div>



<script>
(async function () {
  const gallery   = document.getElementById('gallery');
  const lightbox  = document.getElementById('lightbox');
  const lightImg  = document.getElementById('lightboxImg');
  const closeBtn  = lightbox.querySelector('button.close');

  const res = await fetch('./gallery.json', { cache: 'no-cache' });
  if (!res.ok) {
    gallery.innerHTML = '<p style="opacity:.7">Could not load gallery.json.</p>';
    return;
  }
  const urls = await res.json();

  // üîÄ Fisher‚ÄìYates shuffle (in-place)
  for (let i = urls.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [urls[i], urls[j]] = [urls[j], urls[i]];
  }

  // Build the grid (same as before)
  for (const url of urls) {
    const fig = document.createElement('figure');
    fig.dataset.full = url;

    const img = document.createElement('img');
    img.src = url;
    img.loading = 'lazy';
    img.decoding = 'async';
    img.alt = url.split('/').pop().replace(/\.[^.]+$/,'').replace(/[-_]/g,' ');

    fig.appendChild(img);
    fig.addEventListener('click', () => openLightbox(url, img.alt));
    gallery.appendChild(fig);
  }

  function openLightbox(src, alt) {
    lightImg.src = src;
    lightImg.alt = alt || '';
    lightbox.classList.add('open');
    document.body.style.overflow = 'hidden';
  }
  function closeLightbox() {
    lightbox.classList.remove('open');
    lightImg.src = '';
    document.body.style.overflow = '';
  }
  closeBtn.addEventListener('click', closeLightbox);
  lightbox.addEventListener('click', (e)=>{ if (e.target === lightbox) closeLightbox(); });
  window.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') closeLightbox(); });
})();
</script>


</body>
</html>

